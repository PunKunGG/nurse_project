<!doctype html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö - Nurse Learning</title>
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="stylesheet" href="assets/css/manage_questions.css" />
  </head>

  <body>
    <main class="app">
      <!-- SIDEBAR -->
      <aside class="sidebar">
        <div class="brand">
          <div class="brand-badge">
            <img src="assets/img/logo.png" alt="Logo" width="40" height="40" />
          </div>
          <div>
            <div class="brand-title">Faculty of Nursing</div>
            <div class="brand-sub">Khon Kaen University</div>
          </div>
        </div>

        <div class="user-card">
          <div class="user-avatar">üë§</div>
          <div class="user-meta">
            <div id="me" class="user-name">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‚Ä¶</div>
            <div id="me_sub" class="user-sub"></div>
          </div>
        </div>

        <nav class="menu">
          <a class="menu-item" href="dashboard.html">Dashboard</a>
          <a class="menu-item" href="pretest.html">Pre-test</a>
          <a class="menu-item" href="game.html">Play Game</a>
          <a class="menu-item" href="posttest.html">Post-test</a>
          <a class="menu-item" href="certificate.html">Certificate</a>
          <a class="menu-item" href="creators.html">Creators</a>
        </nav>

        <div id="teacher_tools" class="teacher-card" style="display: none">
          <div class="teacher-title">Teacher Tools</div>
          <a class="btn w-full active" href="manage_questions.html"
            >‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö</a
          >
          <a class="btn btn-ghost w-full" href="report.html">‡∏î‡∏π‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</a>
        </div>

        <div id="admin_tools" class="admin-card" style="display: none">
          <div class="admin-title">Admin Tools</div>
          <a class="btn w-full" href="manage_users.html">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</a>
        </div>

        <div class="sidebar-footer">
          <button id="btn_logout" class="btn btn-ghost w-full" type="button">
            ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
          </button>
        </div>
      </aside>

      <!-- CONTENT -->
      <section class="content">
        <header class="content-header">
          <div class="header-row">
            <div>
              <h1>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö</h1>
              <p class="muted">‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡πÅ‡∏•‡∏∞‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö Pre-test / Post-test</p>
            </div>
            <button class="btn" id="addQuestionBtn" onclick="openAddModal()">
              <span>+</span> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö
            </button>
          </div>
        </header>

        <!-- Filter Tabs -->
        <div class="filter-tabs">
          <button
            class="tab-btn active"
            data-type="pre"
            onclick="filterQuestions('pre')"
          >
            Pre-test
          </button>
          <button
            class="tab-btn"
            data-type="post"
            onclick="filterQuestions('post')"
          >
            Post-test
          </button>
          <button
            class="tab-btn"
            data-type="all"
            onclick="filterQuestions('all')"
          >
            ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
          </button>
        </div>

        <!-- Questions Table -->
        <div class="panel">
          <div class="table-container">
            <table class="questions-table" id="questionsTable">
              <thead>
                <tr>
                  <th style="width: 60px">‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
                  <th style="width: 100px">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                  <th>‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</th>
                  <th style="width: 80px">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</th>
                  <th style="width: 120px">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                </tr>
              </thead>
              <tbody id="questionsBody">
                <tr>
                  <td colspan="5" class="loading-cell">
                    <div class="loading-spinner"></div>
                    ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Stats -->
        <div class="stats-row">
          <div class="stat-card">
            <div class="stat-value" id="totalCount">0</div>
            <div class="stat-label">‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="preCount">0</div>
            <div class="stat-label">Pre-test</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="postCount">0</div>
            <div class="stat-label">Post-test</div>
          </div>
        </div>

        <footer class="content-footer muted">
          ¬© Faculty of Nursing, Khon Kaen University
        </footer>
      </section>
    </main>

    <!-- Add/Edit Question Modal -->
    <div class="modal-overlay" id="questionModal">
      <div class="modal-content modal-lg">
        <div class="modal-header">
          <h2 id="modalTitle">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà</h2>
          <button class="modal-close" onclick="closeModal()">&times;</button>
        </div>
        <form id="questionForm" onsubmit="saveQuestion(event)">
          <div class="modal-body">
            <div class="form-group">
              <label class="form-label">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö *</label>
              <select id="testType" class="form-select" required>
                <option value="pre">Pre-test</option>
                <option value="post">Post-test</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label">‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ç‡πâ‡∏≠ *</label>
              <input
                type="number"
                id="questionNumber"
                class="form-input"
                min="1"
                required
              />
            </div>

            <div class="form-group">
              <label class="form-label">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° *</label>
              <textarea
                id="questionText"
                class="form-textarea"
                rows="4"
                required
              ></textarea>
            </div>

            <div class="form-group">
              <label class="form-label">‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (JSON Array) *</label>
              <textarea
                id="optionsJson"
                class="form-textarea"
                rows="6"
                required
                placeholder='[
  {"key": "‡∏Å", "text": "‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 1"},
  {"key": "‡∏Ç", "text": "‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 2"},
  {"key": "‡∏Ñ", "text": "‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 3"},
  {"key": "‡∏á", "text": "‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 4"}
]'
              ></textarea>
              <small class="form-hint">‡πÉ‡∏™‡πà‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö JSON Array</small>
            </div>

            <div class="form-group">
              <label class="form-label">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á *</label>
              <select id="correctAnswer" class="form-select" required>
                <option value="‡∏Å">‡∏Å</option>
                <option value="‡∏Ç">‡∏Ç</option>
                <option value="‡∏Ñ">‡∏Ñ</option>
                <option value="‡∏á">‡∏á</option>
              </select>
            </div>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-ghost" onclick="closeModal()">
              ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
            </button>
            <button type="submit" class="btn" id="saveBtn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteModal">
      <div class="modal-content modal-sm">
        <div class="modal-header">
          <h2>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö</h2>
          <button class="modal-close" onclick="closeDeleteModal()">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <p>‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</p>
          <p class="muted" id="deleteQuestionText"></p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-ghost" onclick="closeDeleteModal()">
            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
          </button>
          <button
            class="btn btn-danger"
            id="confirmDeleteBtn"
            onclick="confirmDelete()"
          >
            ‡∏•‡∏ö
          </button>
        </div>
      </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <!-- Scripts -->
    <script type="module" src="assets/js/pages/manageQuestionsPage.js"></script>
    <script src="assets/js/theme.js"></script>
    <script src="assets/js/mobile-menu.js"></script>
    <script type="module" src="assets/js/userInfo.js"></script>
  </body>
</html>

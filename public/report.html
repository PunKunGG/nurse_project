<!doctype html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô - Nurse Learning</title>
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="stylesheet" href="assets/css/report.css" />
  </head>

  <body>
    <main class="app">
      <!-- SIDEBAR -->
      <aside class="sidebar">
        <div class="brand">
          <div class="brand-badge">
            <img src="assets/img/logo.png" alt="Logo" width="40" height="40" />
          </div>
          <div>
            <div class="brand-title">Faculty of Nursing</div>
            <div class="brand-sub">Khon Kaen University</div>
          </div>
        </div>

        <div class="user-card">
          <div class="user-avatar">üë§</div>
          <div class="user-meta">
            <div id="me" class="user-name">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‚Ä¶</div>
            <div id="me_sub" class="user-sub"></div>
          </div>
        </div>

        <nav class="menu">
          <a class="menu-item" href="dashboard.html">Dashboard</a>
          <a class="menu-item" href="pretest.html">Pre-test</a>
          <a class="menu-item" href="game.html">Play Game</a>
          <a class="menu-item" href="posttest.html">Post-test</a>
          <a class="menu-item" href="certificate.html">Certificate</a>
          <a class="menu-item" href="creators.html">Creators</a>
        </nav>

        <div id="teacher_tools" class="teacher-card" style="display: none">
          <div class="teacher-title">Teacher Tools</div>
          <a class="btn btn-ghost w-full" href="manage_questions.html"
            >‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö</a
          >
          <a class="btn w-full active" href="report.html">‡∏î‡∏π‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</a>
        </div>

        <div id="admin_tools" class="admin-card" style="display: none">
          <div class="admin-title">Admin Tools</div>
          <a class="btn w-full" href="manage_users.html">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</a>
        </div>

        <div class="sidebar-footer">
          <button id="btn_logout" class="btn btn-ghost w-full" type="button">
            ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
          </button>
        </div>
      </aside>

      <!-- CONTENT -->
      <section class="content">
        <header class="content-header">
          <div class="header-row">
            <div>
              <h1>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h1>
              <p class="muted">
                ‡∏î‡∏π‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô Pre-test ‡πÅ‡∏•‡∏∞ Post-test ‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
              </p>
            </div>
            <button class="btn btn-ghost" onclick="exportCSV()">
              Export CSV
            </button>
          </div>
        </header>

        <!-- Stats Summary -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">üë•</div>
            <div class="stat-info">
              <div class="stat-value" id="totalStudents">0</div>
              <div class="stat-label">‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">‚úèÔ∏è</div>
            <div class="stat-info">
              <div class="stat-value" id="totalAttempts">0</div>
              <div class="stat-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö</div>
            </div>
          </div>
          <div class="stat-card success">
            <div class="stat-icon">‚úÖ</div>
            <div class="stat-info">
              <div class="stat-value" id="passedCount">0</div>
              <div class="stat-label">‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå</div>
            </div>
          </div>
          <div class="stat-card warning">
            <div class="stat-icon">üìà</div>
            <div class="stat-info">
              <div class="stat-value" id="avgScore">0%</div>
              <div class="stat-label">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</div>
            </div>
          </div>
        </div>

        <!-- Search Box -->
        <div class="search-box">
          <input
            type="text"
            id="searchInput"
            class="search-input"
            placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤..."
            oninput="searchStudents(this.value)"
          />
        </div>

        <!-- Filter Tabs -->
        <div class="filter-tabs">
          <button
            class="tab-btn active"
            data-type="all"
            onclick="filterAttempts('all')"
          >
            ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
          </button>
          <button
            class="tab-btn"
            data-type="pre"
            onclick="filterAttempts('pre')"
          >
            Pre-test
          </button>
          <button
            class="tab-btn"
            data-type="post"
            onclick="filterAttempts('post')"
          >
            Post-test
          </button>
        </div>

        <!-- Report Table -->
        <div class="panel">
          <div class="table-container">
            <table class="report-table" id="reportTable">
              <thead>
                <tr>
                  <th style="width: 50px">#</th>
                  <th>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                  <th>‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</th>
                  <th style="width: 100px">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                  <th style="width: 100px">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</th>
                  <th style="width: 100px">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                  <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥</th>
                  <th style="width: 80px">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                </tr>
              </thead>
              <tbody id="reportBody">
                <tr>
                  <td colspan="8" class="loading-cell">
                    <div class="loading-spinner"></div>
                    ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <footer class="content-footer muted">
          ¬© Faculty of Nursing, Khon Kaen University
        </footer>
      </section>
    </main>

    <!-- Reset Confirmation Modal -->
    <div class="modal-overlay" id="resetModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï Post-test</h3>
          <button class="modal-close" onclick="closeResetModal()">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <p>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï Post-test ‡∏Ç‡∏≠‡∏á:</p>
          <div class="reset-info">
            <strong id="resetStudentName">-</strong><br />
            <small id="resetStudentId">‡∏£‡∏´‡∏±‡∏™: -</small>
          </div>
          <p class="warning-text">‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥ Post-test ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ</p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-ghost" onclick="closeResetModal()">
            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
          </button>
          <button
            class="btn btn-danger"
            id="confirmResetBtn"
            onclick="confirmReset()"
          >
            ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
          </button>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="assets/js/pages/reportPage.js"></script>
    <script src="assets/js/theme.js"></script>
    <script src="assets/js/mobile-menu.js"></script>
    <script type="module" src="assets/js/userInfo.js"></script>
  </body>
</html>
